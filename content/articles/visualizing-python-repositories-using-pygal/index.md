---
layout: engineering-education
status: publish
published: true
url: /visualizing-repositories-using-pygal/
title: Visualizing repositories using Pygal
description: In this article, you'll learn how to construct a visualization that shows the comparative popularity of Python works on GitHub using Pygal.
author: duncan-ndegwa
date: 2021-09-03T00:00:00-04:35
topics: [API]
excerpt_separator: <!--more-->
images:

 - url: engineering-education\content\articles\visualizing-repositories-using-pygal\hero.jpg
   alt: Visualizing repositories using Pygal hero image
---

Pygal allows us to create a range of graphs and charts. In this article, you'll learn how to construct a visualization that shows the comparative Python's prominence works on github.com. 
<!--more-->

### Prerequisites
 - Some knowledge of Python
 - Knowledge on Web APIs
 - [PIP](https://pip.pypa.io/en/stable/installation/) installed.

### Installing pygal
To install Pygal, run the command below;

```bash
pip install pygal
```
You can visit [Pygal's official site](http://www.pygal.org/en/stable/installing.html) for more information on the installation of Pygal.

### The pygal gallery
The Pygal gallery is a collection of charts that Pygal can generate.
To grasp more of the chart types that can be generated by Pygal, read over to the documentation tab on thechart type [page]((http://www.pygal.org/)). Additionally, you can examine how the visualizations are created by exploring the source code for each.

### Visualizing repositories
We will create a bar chart: the tally of stars the project has earned will be represented by the height of each bar.

```python
import requests
url = 'https://api.github.com/search/repositories?q=language:python&sort=stars' # Initiate an API request.
request = requests.get(url)
print("Status code:", request.status_code)
respons_dict = request.json() # In a variable, save the API response.
print("Total repos:", respons_dict['total_count'])
print('name-:', repos_dict['name']) #write the name of the project
print('owner-:', repos_dict['owner']['login']) #show the owner of the project
print('stars-:', repos_dict['stargazers_count'])#print the number of stars the project has
print('repo-:', repos_dict['html_url']) # print the link to the project's repository
print('Description-:', repos_dict['description']) # print the description of the project
chart.title = 'Python Works with the Most Stars on GitHub'
chart.x_labels = names
chart.add('', stars)
chart.render_to_file('py_repos.svg')
```

Click [here](https://github.com/duncandegwa/visualizing-repositories-using-pygal/commit/8d9a7010ff33a540b479fde252fbba72e54564b7) to see the output of the above code.

### Refining Pygal Charts
Let's fine-tune the look of our graph. First, reorganize the code somewhat by establishing a configuration object that includes all of our adjustments to pass to Bar():
```python
import requests
import pygal
from pygal.style import LightColorizedStyle as LCSe, LightenStyle as LSe
# Start an API request.
url = 'https://api.github.com/search/repositories?q=language:python&sort=star'
request = requests.get(url)
print("Status code:", request.status_code)
# In a variable, save the API response.
response_dictionary =request.json()
print("Total-repos:", response_dictionary['total_count'])
# Investigate the repository's contents.
repos_dicts = response_dictionary['items']
names, stars = [], []
for repos_dict in repos_dicts:
names.append(repos_dict['name'])
stars.append(repos_dict['stargazers_count'])
# Construct a visual picture
our_style = LSe('#333366', base_style=LCSe)
myconfig = pygal.Config() # make an instance of Pygal’s Config class
myconfig.x_label_rotation = 45 # set the attribute x_label_rotation to 45
myconfig.show_legend = False #set the attribute show_legend to false
myconfig.title_font_size = 23 #choose the text size for the heading of the chart
myconfig.label_font_size = 13 # choose the text size for the minor label (The minor labels are the project
names along the x-axis)
myconfig.major_label_font_size = 17 #set the text size for the major label(The major labels are just the labels
on the y-axis)
myconfig.truncate_label = 15 #To reduce the length of long project names to 15 characters, employ truncate
label.
myconfig.show_y_guides = False #set show_y_guides to False hide the horizontal lines on the graph
myconfig.width = 1000 #Choose a custom width for the graph so that it takes up maximum browser area
chart = pygal.Bar(myconfig, style=our_style) #make an instance of Bar, and pass myconfig and style as
arguments, respectively
chart.title = 'Python Projects with the Most Stars on GitHub'
chart.x_labels = names
chart.add('', stars)
chart.render_to_file('py_repos.svg')
```
The restyled chart is shown below:
![The styling for the chart has been refined.](/engineering-education/visualizing-repositories-using-pygal/refining.jpeg)

### Customizing Tooltips
Floating a mouse above a single bar displays data it represents. This is known as a tooltip, and it usually displays the tally of stars that a project possesses. Let's make a custom tooltip to display the descriptions of each project.
Let's have a look at an example that uses the first three projects plotted singly with custom labels for each bar. Rather than passing a list of values to `add()`, we'll pass a list of dictionaries with the code below:

```python
import pygal
from pygal.style import LightColorizedStyle as LCSe, LightenStyle as LSe
our_style = LSe('#333366', base_style=LCSe)
chart = pygal.Bar(style=our_style, x_label_rotation=45, show_legend=False)
chart.title = 'Projects in Python '
chart.x_labels = ['public-apis', 'system-design-primer', 'Python']
plot_dictoinaries = [
{'value': 144904, 'label': 'Description of public-apis.'},
{'value': 139818, 'label': 'Description of system-design-primer.'},
{'value': 113616, 'label': 'Description of Python.'},
]
chart.add('', plot_dictoinaries)
chart.render_to_file('bar_desc.svg')
```

We create a plot_dictionaries list with three dictionaries: one for the public_apis work, the other for system_design_primer work, and the last one for Python.We pass the list of dictionaries containing the bars (plot dictionaries) to `add()`. 

One of the tooltips is shown below:

![Adding Custom Tooltips.](/engineering-education/visualizing-repositories-using-pygal/Adding_Custom_Tooltips.png)

### Including Clickable Links in Our Charts
We create a new key-value pair for each project’s plot_dictionary using the key `xlink`:

```python
import requests
import pygal
from pygal.style import LightColorizedStyle as LCSe, LightenStyle as LSe
# Initiate an API request
url = 'https://api.github.com/search/repositories?q=language:python&sort=star'
request = requests.get(url)
print("Status-code:", request.status_code)
# In a variable, save the API response.
response_dictionary = request.json()
print("Total repos:", response_dictionary['total_count'])
# Investigate the repository's contents.
repository_dicts = response_dictionary['items']
names, plot_dictionaries = [], []
for repository_dict in repository_dicts:
names.append(repository_dict['name'])
plot_dictionary = {
'value': repository_dict['stargazers_count'],
'label': repository_dict['description'],
'xlink': repository_dict['html_url'],
}
plot_dictionaries.append( plot_dictionary)
chart = pygal.Bar(myconfig, style=our_style) #make an instance of Bar, and pass myconfig and style as
arguments, respectively
chart.title = 'Python Projects with the Most Stars on GitHub'
chart.x_labels = names
chart.add('')
chart.render_to_file('py_repos.svg')
```

Here is the output of the above code:

![Adding Clickable Links to Our Graph.](/engineering-education/visualizing-repositories-using-pygal/Adding_Clickable_Links_to_Our_Graph.jpeg)

### Conclusion
In this tutorial, we have seen how to:
 - Install Pygal
 - Visualize repositories
 - Refining Pygal Charts
 - Add Custom Tooltips
 - Add Clickable Links to Our Graphs

### Further reading
You can learn more about other concepts by [visiting this page.](https://www.pluralsight.com/guides/building-visualizations-with-pygal).

---
Peer Review Contributions by: [Elly Omondi](/engineering-education/authors/elly-omondi)